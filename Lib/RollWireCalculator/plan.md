# Roll Wire Calculator - TDD 구현 계획

> Kent Beck의 TDD 원칙에 따라 작은 단계로 나누어 구현합니다.
> 각 테스트를 완료한 후 체크마크(✓)를 표시하세요.

## 테스트 작성 가이드
- 한 번에 하나의 테스트만 작성
- 가장 단순한 것부터 시작
- 작은 증분으로 기능 추가
- Red → Green → Refactor 사이클 준수

---

## Phase 1: 기본 클래스 구조 및 생성자

### 1.1 RollWireCalculator 클래스 생성
- [x] RollWireCalculator 클래스를 생성할 수 있다
- [x] 와이어 두께(wireThickness, mm)와 롤 내경 반지름(innerRadius, mm)을 파라미터로 받는 생성자가 있다
- [x] 생성자에 전달한 와이어 두께를 조회할 수 있다 (getWireThickness)
- [x] 생성자에 전달한 롤 내경 반지름을 조회할 수 있다 (getInnerRadius)

### 1.2 생성자 입력 검증
- [x] 와이어 두께가 0일 때 예외를 발생시킨다
- [x] 와이어 두께가 음수일 때 예외를 발생시킨다
- [x] 롤 내경이 0일 때 예외를 발생시킨다
- [x] 롤 내경이 음수일 때 예외를 발생시킨다

### 1.3 와이어 두께 조회
- [x] getWireThickness() 메서드로 와이어 두께를 조회할 수 있다

### 1.4 롤 내경 설정 및 조회
- [x] setInnerRadius() 메서드로 롤 내경 반지름을 변경할 수 있다
- [x] getInnerRadius() 메서드로 롤 내경 반지름을 조회할 수 있다
- [x] setInnerRadius()에 0을 전달하면 예외를 발생시킨다
- [x] setInnerRadius()에 음수를 전달하면 예외를 발생시킨다

---

## Phase 2: 길이 → 회전량 변환 (calculateRotationFromLength)

### 2.1 기본 동작
- [x] calculateRotationFromLength 메서드가 존재한다
- [x] 길이가 0일 때 회전량 0을 반환한다

### 2.2 단순 케이스 (1바퀴)
- [x] 와이어가 롤 내경에 정확히 1바퀴 감길 때 360도를 반환한다
- [x] 와이어가 롤 내경에 0.5바퀴 감길 때 180도를 반환한다
- [x] 롤 내경 기준으로 첫 번째 바퀴의 길이를 정확히 계산한다

### 2.3 복잡한 케이스 (연속 증가 모델)
- [x] 주어진 길이에 대해 회전량을 계산할 때 연속 증가 모델이 적용된다
- [x] 2바퀴 분량의 길이를 입력하면 720도보다 약간 작은 회전량을 반환한다 (반지름이 증가하므로)
- [x] 회전량에 비례한 반지름 증가 공식 r(θ) = innerRadius + θ/360 × wireThickness이 적용된다
- [x] 적분 또는 수치계산으로 역산하여 정확한 회전량을 구한다
- [x] 3바퀴 이상의 긴 길이에서도 정확한 회전량을 계산한다

### 2.4 입력 검증
- [x] 길이가 음수일 때 예외를 발생시킨다

### 2.5 경계값 테스트
- [x] 매우 작은 길이(0.001m)에서 올바르게 동작한다
- [x] 매우 큰 길이(1000m)에서 올바르게 동작한다

---

## Phase 3: 회전량 → 길이 변환 (calculateLengthFromRotation)

### 3.1 기본 동작
- [x] calculateLengthFromRotation 메서드가 존재한다
- [x] 회전량이 0일 때 길이 0을 반환한다

### 3.2 단순 케이스 (1바퀴)
- [x] 회전량 360도일 때 1바퀴에 해당하는 길이를 반환한다
- [x] 회전량 180도일 때 0.5바퀴에 해당하는 길이를 반환한다

### 3.3 복잡한 케이스 (연속 증가 모델)
- [x] 180도 회전에 해당하는 정확한 와이어 길이를 계산한다
- [x] 720도(2바퀴) 회전 시 연속적인 반지름 증가를 고려한 길이를 반환한다
- [x] 회전량에 비례한 반지름 증가 모델이 정확히 적용된다
- [x] 3바퀴 이상의 복잡한 케이스에서 적분 또는 수치계산으로 정확한 값을 반환한다

### 3.4 입력 검증
- [x] 회전량이 음수일 때 예외를 발생시킨다

### 3.5 경계값 테스트
- [x] 매우 작은 회전량(0.1도)에서 올바르게 동작한다
- [x] 매우 큰 회전량(36000도)에서 올바르게 동작한다

---

## Phase 4: 역함수 관계 검증

### 4.1 길이 → 회전량 → 길이 변환
- [x] 임의의 길이를 회전량으로 변환 후 다시 길이로 변환하면 원래 값이 나온다
- [x] 여러 다른 길이 값에 대해 역변환이 정확하다
- [x] 부동소수점 오차 범위 내에서 동일한 값을 반환한다

### 4.2 회전량 → 길이 → 회전량 변환
- [x] 임의의 회전량을 길이로 변환 후 다시 회전량으로 변환하면 원래 값이 나온다
- [x] 여러 다른 회전량 값에 대해 역변환이 정확하다
- [ ] 부동소수점 오차 범위 내에서 동일한 값을 반환한다

---

## Phase 5: 실제 사용 시나리오 테스트

### 5.1 실용적 케이스
- [ ] 와이어 두께 1mm, 롤 내경 50mm일 때 10m 길이의 회전량을 계산한다
- [ ] 와이어 두께 2mm, 롤 내경 100mm일 때 1080도 회전의 길이를 계산한다
- [ ] 와이어 두께 0.5mm, 롤 내경 25mm일 때 역변환을 검증한다
- [ ] 롤 내경 변경 후 같은 길이에 대해 다른 회전량이 계산되는지 확인한다

### 5.2 극단적 케이스
- [ ] 매우 얇은 와이어(0.1mm)에서 정확하게 동작한다
- [ ] 매우 두꺼운 와이어(10mm)에서 정확하게 동작한다
- [ ] 작은 롤(10mm 내경)에서 정확하게 동작한다
- [ ] 큰 롤(500mm 내경)에서 정확하게 동작한다
- [ ] 와이어 두께가 롤 내경보다 클 때 정확하게 동작한다

---

## Phase 6: 성능 및 정밀도

### 6.1 정밀도 테스트
- [ ] 부동소수점 연산 오차가 허용 범위(1e-6) 내에 있다
- [ ] 반복 계산 시 오차가 누적되지 않는다

### 6.2 성능 테스트
- [ ] 단일 계산이 1ms 이내에 완료된다
- [ ] 1000회 연속 계산이 100ms 이내에 완료된다

---

## Phase 7: CMake 빌드 시스템

### 7.1 기본 빌드 설정
- [ ] CMakeLists.txt로 프로젝트를 빌드할 수 있다
- [ ] 라이브러리 타겟이 생성된다
- [ ] 테스트 실행 파일이 생성된다

### 7.2 크로스 플랫폼 지원
- [ ] Linux에서 빌드가 성공한다
- [ ] Windows에서 빌드가 성공한다 (가능한 경우)
- [ ] macOS에서 빌드가 성공한다 (가능한 경우)

---

## Phase 8: 문서화 및 예제

### 8.1 코드 문서화
- [ ] 모든 public 메서드에 주석이 있다
- [ ] 클래스에 설명 주석이 있다
- [ ] 파라미터와 반환값이 문서화되어 있다

### 8.2 예제 코드
- [ ] 기본 사용 예제 코드가 작성되어 있다
- [ ] 롤 내경 설정 예제가 포함되어 있다
- [ ] 내경 변경에 따른 계산 차이를 보여주는 예제가 있다
- [ ] 예제 코드가 컴파일되고 실행된다
- [ ] README.md에 사용법이 설명되어 있다

---

## Phase 9: 에러 코드 시스템 구현

### 9.1 에러 코드 정의
- [ ] ErrorCode enum class를 정의한다
- [ ] SUCCESS 에러 코드를 정의한다 (값: 0)
- [ ] INVALID_WIRE_THICKNESS 에러 코드를 정의한다
- [ ] INVALID_INNER_RADIUS 에러 코드를 정의한다
- [ ] INVALID_LENGTH 에러 코드를 정의한다
- [ ] INVALID_ROTATION 에러 코드를 정의한다

### 9.2 에러 메시지 함수
- [ ] getErrorMessage() 함수가 존재한다
- [ ] SUCCESS 에러 코드에 대한 메시지를 반환한다
- [ ] INVALID_WIRE_THICKNESS 에러 코드에 대한 메시지를 반환한다
- [ ] INVALID_INNER_RADIUS 에러 코드에 대한 메시지를 반환한다
- [ ] INVALID_LENGTH 에러 코드에 대한 메시지를 반환한다
- [ ] INVALID_ROTATION 에러 코드에 대한 메시지를 반환한다
- [ ] 정의되지 않은 에러 코드에 대해 "Unknown error" 메시지를 반환한다

### 9.3 기존 예외 처리를 에러 코드 방식으로 전환 (선택적)
- [ ] 생성자에서 std::invalid_argument 대신 에러 코드 방식 사용 여부 결정
- [ ] setInnerRadius()에서 에러 코드 방식 사용 여부 결정
- [ ] calculateRotationFromLength()에서 에러 코드 방식 사용 여부 결정
- [ ] calculateLengthFromRotation()에서 에러 코드 방식 사용 여부 결정
- [ ] 예외 처리와 에러 코드 방식 혼용 시 일관성 유지

**참고**: 현재 구현은 std::invalid_argument를 사용 중입니다. 에러 코드 시스템은 추가 옵션으로 제공하거나, 기존 방식을 완전히 대체할 수 있습니다.

---

## 완료 체크리스트

- [ ] 모든 테스트가 통과한다
- [ ] 컴파일 경고가 없다
- [ ] 메모리 누수가 없다
- [ ] 코드 리뷰가 완료되었다
- [ ] 문서화가 완료되었다

---

**참고사항:**
- 각 테스트는 독립적으로 실행 가능해야 함
- 테스트 우선, 구현은 최소한으로
- 리팩토링은 테스트 통과 후에만
- 작은 단계로 커밋하기
