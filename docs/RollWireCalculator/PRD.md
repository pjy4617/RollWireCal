# Roll Wire Calculator - Product Requirements Document (PRD)

## 1. 개요

### 1.1 프로젝트 명
Roll Wire Calculator (RollWireCal)

### 1.2 목적
두께가 있는 와이어를 롤에 감을 때, 와이어 길이와 롤의 회전량 간의 상관관계를 계산하는 유틸리티 함수를 제공합니다.

### 1.3 범위
- 와이어 길이 → 롤 회전량 변환 함수
- 롤 회전량 → 와이어 길이 변환 함수
- 롤의 내경 반지름(inner radius) 설정 기능
- C++ 언어로 구현
- CMake 빌드 시스템 지원

## 2. 기능 요구사항

### 2.1 핵심 기능

#### 2.1.1 길이-회전량 변환 함수
- **기능명**: `calculateRotationFromLength()`
- **설명**: 와이어 길이를 입력받아 롤의 회전량을 계산
- **입력**: 와이어 길이 (m 단위)
- **출력**: 회전량 (degree 단위)

#### 2.1.2 회전량-길이 변환 함수
- **기능명**: `calculateLengthFromRotation()`
- **설명**: 롤의 회전량을 입력받아 와이어 길이를 계산
- **입력**: 회전량 (degree 단위)
- **출력**: 와이어 길이 (m 단위)

#### 2.1.3 롤 내경 설정 함수
- **기능명**: `setInnerRadius()` 또는 생성자 파라미터
- **설명**: 롤의 내경 반지름(inner radius)을 설정
- **입력**: 롤 내경 반지름 (mm 단위)
- **참고**: 와이어가 하나도 감기지 않은 상태의 반지름 (내경/2가 아닌 반지름 값)

### 2.2 파라미터 및 단위

#### 2.2.1 단위 체계
- **와이어 두께**: mm (밀리미터)
- **와이어 길이**: m (미터)
- **회전량**: degree (도)
- **롤의 내경 반지름**: mm (밀리미터)

#### 2.2.2 기본 가정
- 와이어의 두께는 일정함
- 롤에 와이어가 완전히 감긴 상태를 와이어 길이 0으로 정의
- 모든 와이어가 감긴 상태에서 와이어를 풀 때의 회전량은 양수
- 회전량 0도는 초기 상태 (와이어가 완전히 감긴 상태)
- 와이어는 롤에 감길 때 겹치지 않음
- 롤의 내경: 와이어가 하나도 감기지 않은 상태의 반지름
- 롤의 외경: 와이어가 모두 감긴 상태의 반지름
- 반지름은 회전량에 비례하여 연속적으로 증가 (나선형 모델)
- 360도 회전 시 와이어 두께만큼 반지름이 증가함

## 3. 기술 요구사항

### 3.1 개발 언어
- **주 언어**: C++
- **표준**: C++11 이상 권장

### 3.2 빌드 시스템
- **빌드 도구**: CMake
- **요구사항**: CMakeLists.txt 파일 제공

### 3.3 플랫폼 호환성
- 크로스 플랫폼 지원 (Windows, Linux, macOS)

## 4. 구현 명세

### 4.1 함수 시그니처 (예시)

```cpp
class RollWireCalculator {
private:
    double wireThickness;   // mm - 와이어 두께
    double innerRadius;     // mm - 롤의 내경 반지름 (와이어가 감기지 않은 상태)

public:
    // 생성자: 와이어 두께와 롤 내경 반지름을 받음
    RollWireCalculator(double thickness, double innerRadius);

    // 길이 → 회전량 (연속 증가 모델)
    double calculateRotationFromLength(double length);

    // 회전량 → 길이 (연속 증가 모델)
    double calculateLengthFromRotation(double rotation);

    // 롤 내경 반지름 설정
    void setInnerRadius(double radius);

    // 롤 내경 반지름 조회
    double getInnerRadius() const;

    // 와이어 두께 조회
    double getWireThickness() const;
};
```

### 4.2 수학적 모델
롤에 감긴 와이어의 기하학적 관계를 기반으로 한 계산 알고리즘 구현

#### 4.2.1 반지름 증가 모델 (연속 증가 - Spiral Model)
- 초기 반지름: `r₀ = innerRadius` (회전량 0도, 와이어가 모두 감긴 상태)
- 회전량 θ(degree)에서의 반지름: `r(θ) = innerRadius + (θ / 360) × wireThickness`
- 180도 회전 시: `r(180°) = innerRadius + 0.5 × wireThickness`
- 360도 회전(1바퀴) 완료 시: `r(360°) = innerRadius + wireThickness`
- 720도 회전(2바퀴) 완료 시: `r(720°) = innerRadius + 2 × wireThickness`
- 반지름은 회전량에 비례하여 **연속적으로** 증가 (나선형 모델)

#### 4.2.2 길이 계산 (적분 모델)
- 미소 회전 dθ에서의 미소 길이: `dL = r(θ) × (dθ / 360) × 2π`
- 회전량 0부터 Θ까지의 총 길이:
  ```
  L = ∫[0→Θ] r(θ) × (2π/360) dθ
    = ∫[0→Θ] [innerRadius + (θ/360) × wireThickness] × (2π/360) dθ
  ```
- 반지름이 연속적으로 변하므로 적분 또는 수치 계산 필요

## 5. 제약사항

### 5.1 물리적 제약사항
1. 와이어 두께는 일정하다고 가정
2. 와이어는 겹치지 않고 순차적으로 감김
3. 롤의 내경은 고정값 (와이어가 감기지 않은 상태)
4. 와이어가 감길 때마다 반지름이 와이어 두께만큼 증가

### 5.2 수치 제약사항
- 음수 길이는 허용하지 않음
- 회전량 0도는 와이어가 완전히 감긴 상태
- 롤의 내경은 양수여야 함
- 와이어 두께는 양수여야 함

## 6. 품질 요구사항

### 6.1 정확성
- 수치 계산의 정밀도 보장
- 부동소수점 연산 오차 최소화

### 6.2 성능
- 실시간 계산 가능한 성능
- 메모리 사용량 최소화

### 6.3 유지보수성
- 명확한 함수명과 주석
- 모듈화된 구조

## 7. 테스트 요구사항

### 7.1 단위 테스트
- 각 함수별 정확성 검증
- 경계값 테스트
- 예외 상황 처리 테스트

### 7.2 통합 테스트
- 길이-회전량 상호 변환 검증
- 역함수 관계 확인

## 8. 배포 및 패키징

### 8.1 배포 형태
- 헤더 파일 (.h)
- 라이브러리 파일 (.lib/.a)
- 예제 코드

### 8.2 문서화
- API 문서
- 사용 예제
- 설치 가이드

## 9. 일정 및 마일스톤

### Phase 1: 핵심 함수 구현
- 기본 계산 로직 구현
- 단위 테스트 작성

### Phase 2: 빌드 시스템 구성
- CMakeLists.txt 작성
- 크로스 플랫폼 테스트

### Phase 3: 문서화 및 최적화
- API 문서 작성
- 성능 최적화
- 예제 코드 작성

---

**문서 버전**: v1.0  
**작성일**: 2025-11-21  
**검토일**: TBD